(()=>{"use strict";const e=(e,t,s,n,a="block")=>{const c=document.querySelector(e),o=document.querySelectorAll(t),i=document.querySelectorAll(s);function r(){i.forEach((e=>{e.style.display="none"})),o.forEach((e=>{e.classList.remove(n)}))}function l(e=0){try{i[e].style.display=a}catch(e){}try{o[e].classList.add(n)}catch(e){}}r(),l();try{c.addEventListener("click",(e=>{e.preventDefault(),e.target&&(e.target.classList.contains(t.replace(/\./,""))||e.target.parentNode.classList.contains(t.replace(/\./,"")))&&o.forEach(((t,s)=>{e.target!=t&&e.target.parentNode!=t||(r(),l(s))}))}))}catch(e){}},t=()=>{let e=!1;function t(t,n,a,c=!1){const o=document.querySelectorAll(t),i=document.querySelector(n),r=document.querySelector(a),l=document.querySelectorAll("[data-modal]"),d=s();o.forEach((t=>{t.addEventListener("click",(s=>{s.target&&s.preventDefault(),e=!0,c&&t.remove(),l.forEach((e=>{e.style.display="none",e.classList.add("animated","fadeIn")})),i.style.display="flex",document.body.style.overflow="hidden",document.body.style.marginRight=`${d}px`}))})),r.addEventListener("click",(()=>{l.forEach((e=>{e.style.display="none"})),i.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"})),i.addEventListener("click",(e=>{e.target===i&&(l.forEach((e=>{e.style.display="none"})),i.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")}))}function s(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}var n;t(".vacansy",".popup-booking",".popup-booking .popup__close"),t(".profile",".popup-input",".popup-input .popup__close"),t(".reestablish",".popup-recovery",".popup-recovery .popup__close"),t(".registration",".popup-registration",".popup-registration .popup__close"),t(".subsribe",".popup-subscription",".popup-subscription .popup__close"),t(".registration-completed",".popup-cheack-phone",".popup-cheack-phone .popup__close"),t(".cancel",".popup-input",".popup-input .popup__close"),n=".subsribe",window.addEventListener("scroll",(()=>{let t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);!e&&window.pageYOffset+document.documentElement.clientHeight>=t&&document.querySelector(n).click()}))};class s{constructor(){this.burgerMenu=document.querySelector(".header nav.navbar .navbar-toggler"),this.orderMenu=document.querySelector(".vacansy")}init(){this.openBurger(),this.closeBurger(),this.closeOrder()}openBurger(){this.burgerMenu.addEventListener("click",(()=>{document.body.style.overflow="hidden"}))}closeBurger(){this.burgerMenu.addEventListener("click",(()=>{this.burgerMenu.classList.contains("collapsed")&&(document.body.style.overflow="")}))}closeOrder(){this.orderMenu.addEventListener("click",(()=>{this.closeBurger(),this.burgerMenu.click()}))}}class n{constructor(e){this.forms=document.querySelectorAll(e),this.btn=document.querySelector("button"),this.inputs=document.querySelectorAll("input"),this.textareas=document.querySelectorAll("textarea"),this.message={loading:"Загрузка...",success:"Спасибо! Скоро мы с вами свяжемся!",failure:"Что-то пошло не так...",input:"Вы вошли",registration:"Вы Зарегистрировались",booking:"Вы забронировали",reviews:"Спасибо, что оставили отзыв",recovery:"Пароль восстановлен",cheack:"Отлично! Телефон проверен",subscribe:"Спасибо! вы будете получать уведомления",person:"Информация изменена"},this.path="../../server.php"}clearInputs(){this.inputs.forEach((e=>{e.value=""}))}clearTextareas(){this.textareas.forEach((e=>{e.value=""}))}checkMailInputs(){document.querySelectorAll('[type="email"]').forEach((e=>{e.addEventListener("keypress",(function(e){e.key.match(/[^a-z 0-9 @ \.]/gi)&&e.preventDefault()}))}));document.querySelectorAll('[type="name"]').forEach((e=>{e.addEventListener("keypress",(function(e){e.key.match(/[^а-яё]/gi)&&e.preventDefault()}))}))}initMask(){function e(e){let t="+380 (__) __-__",s=0,n=t.replace(/\D/g,""),a=this.value.replace(/\D/g,"");n.length>=a.length&&(a=n),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&s<a.length?a.charAt(s++):s>=a.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let s=t.createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",e),s.select()}})(this.value.length,this)}document.querySelectorAll('[type="phone"]').forEach((t=>{t.addEventListener("input",e),t.addEventListener("focus",e),t.addEventListener("blur",e)}))}async postData(e,t){let s=await fetch(e,{method:"POST",body:t});return await s.text()}init(){this.checkMailInputs(),this.initMask(),this.btn.disabled=!1,this.forms.forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault();let s=document.createElement("div");s.classList.add("statusMessages"),e.parentNode.appendChild(s),s.textContent=this.message.loading;const n=new FormData(e);this.postData(this.path,n).then((t=>{switch(console.log(t),!0){case e.classList.contains("entrance"):s.textContent=this.message.input;break;case e.classList.contains("registr"):s.textContent=this.message.registration;break;case e.classList.contains("subscribe"):s.textContent=this.message.subscribe;break;case e.classList.contains("cheackPhone"):s.textContent=this.message.cheack;break;case e.classList.contains("recovering"):s.textContent=this.message.recovery;break;case e.classList.contains("reviews"):s.textContent=this.message.reviews;break;case e.classList.contains("bookings"):s.textContent=this.message.booking;break;case e.classList.contains("page__container-content-person"):s.textContent=this.message.person;break;default:s.textContent=this.message.success}})).catch((()=>{s.textContent=this.message.failure})).finally((()=>{this.clearInputs(),this.clearTextareas(),this.btn.disabled=!0,setTimeout((()=>{s.remove(),this.btn.disabled=!1}),5e3)}))}))}))}}const a=(e,t={},s)=>{const n=document.getElementById(e),a=document.querySelector(s);try{n.addEventListener("change",(e=>{if(console.log(e.target.files),!e.target.files.length)return;Array.from(e.target.files).forEach((e=>{if(console.log(e),!e.type.match("image"))return;const t=new FileReader;t.onload=e=>{console.log(e.target.result),a.insertAdjacentHTML("afterbegin",`<img src="${e.target.result}" />`)},t.readAsDataURL(e)}))}))}catch(e){}try{t.accept&&Array.isArray(t.accept)&&n.setAttribute("accept",t.accept.join(","))}catch(e){}},c=document.querySelector(".products-wrapper");!async function(){const e=await fetch("../server/products.json"),t=await e.json();(function(e){e.forEach((e=>{const t=`\n            <div class="product" data-id="${e.id}">\n                <div class="product-img">\n                    <img src="${e.imgSrc}" alt="">\n                </div>\n                <a href="./description.html" class="product-title">\n                    ${e.title}\n                </a>\n                <div class="product-description">\n                    ${e.description}\n                </div>\n                <div class="product-rating">\n                    <div class='rating-result'>\n                        <span class='active'></span>\t\n                        <span class='active'></span>    \n                        <span class='active'></span>  \n                        <span></span>    \n                        <span></span>\n                    </div>\n                </div>\n                <div class="product-price">\n                    <b><span>${e.price}</span>₽/кг</b> <span>За 500гр.</span>\n                </div>\n                <a href="" class="product-to-basket">В корзину</a>\n            </div>\n            `;c.insertAdjacentHTML("beforeend",t)}))})(t),console.log(t)}(),window.FLS=!0,window.addEventListener("DOMContentLoaded",(()=>{e(".tabs-info-slider",".tabs-info-block",".info-content","active-class-tabs-green"),e(".tabs-info",".tabs-form-info",".content-form","active-class-checked"),e(".page__container-tabs-content",".tabs-info",".content-profile","active-class-tab-profile","flex"),e(".title-sliders",".title-slides",".block","active-title-slide"),t(),(new s).init(),new n("form").init(),a("inputfile",{accept:[".png",".jpg",".jpeg",".gif"]},".photo")}))})();